<svg id="figure" viewBox="0 0 1000 1000">
    <g id="text-content">
        <text x="100" y="50" font-size="2em">We can redraw this table as a Venn diagram.</text>
    </g>
    <g id="diagram">
        <circle id="circle20" class="circle" cx="400" cy="500" r="200"></circle>
        <circle id="circle500"class="circle" cx="600" cy="500" r="200"></circle>
        <text x="300" y="500" text-anchor="middle" dominant-baseline="central" font-size="2em">20</text>
        <text x="500" y="500" text-anchor="middle" dominant-baseline="central" font-size="2em">50</text>
        <text x="700" y="500" text-anchor="middle" dominant-baseline="central" font-size="2em">500</text>
    </g>
    <g id="buttons">
        <rect x="250" y="750" width="500" height="100" fill="white" stroke="black" stroke-width="2"></rect>
        <text x="500" y="800" text-anchor="middle" dominant-baseline="central" font-size="2em">Next</text>
    </g>
</svg>

<script>
    $("#carousel").on("slid.bs.carousel", function () {
        if (document.getElementById("euler_diagram_explanation").classList.contains("active")) {
            if (euler_diagram_explanation_loaded == false) {
                var svg = d3.select("#figure");
                svg.style("opacity", 1);

                var button = d3.select("#buttons");
                button
                    .on("click", function(d, i) {
                        var circle20 = d3.select("#circle20");
                        circle20.attr("r", "100");
                    });

                euler_diagram_explanation_loaded = true;
                
                
                
                
                /*
                
                var diagram = document.getElementById("diagram");
                var rc = rough.svg(diagram);
                var circle1 = rc.circle(30.15*5+260, 500, 15.61*10, {strokeWidth: 3, disableMultiStroke: true, fill: "rgba(255,0,0,0.2)", fillStyle: "solid"});
                var circle2 = rc.circle(67.7*5+260, 500, 43.76*10, {strokeWidth: 3, disableMultiStroke: true, fill: "rgba(0,0,255,0.2)", fillStyle: "solid"});
                //diagram.appendChild(circle1.children[0]);
                //diagram.appendChild(circle2.children[0]);
                //diagram.appendChild(circle1.children[0]);
                //diagram.appendChild(circle2.children[0]);
                
                // Animate the graph for the first time
                d3.selectAll("path")
                    .each(function(d, i) {
                        var path = d3.select(this);
                        // Get the length of the path, which we will use for the intial offset to "hide"
                        // the graph
                        var length = path.node().getTotalLength();
                        // Animate the path by setting the initial offset and dasharray and then transition the offset to 0
                        path
                            .attr("stroke-dasharray", length + " " + length)
                            .attr("stroke-dashoffset", length)
                            .transition()
                            .ease(d3.easeLinear)
                            .attr("stroke-dashoffset", 0)
                            .duration(getRandomInt(1000, 4000));
                    });
                
                
                

                /*
                var annotation = svg.append("g");
                var line_connector = annotation.append("g");
                
                line_connector.append("path")
                    .attr("d", line([[67.7*5+100+100, 500-100],[67.7*5+100+200, 500-200]])+line([[67.7*5+100+200, 500-200],[67.7*5+100+250, 500-200]]))
                    .attr("stroke", "grey")
                    .attr("stroke-dasharray", 4)
                    .attr("stroke-width", 2);

                annotation.append("text")
                    .text("This is text.")
                    .attr("x", 67.7*5+100+250+10)
                    .attr("y", 500-200)
                    .attr("font-size", "2em")
                    .attr("fill", "grey")
                    .attr("dominant-baseline", "central");
                */

            }
        }
    });

</script>